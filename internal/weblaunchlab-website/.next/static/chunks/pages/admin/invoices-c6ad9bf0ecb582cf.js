(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{8570:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/invoices",function(){return t(2722)}])},4178:function(e,r,t){"use strict";var a=t(5893);r.Z=e=>{let{title:r,value:t,icon:n,change:s,changeType:o="neutral",color:i="blue"}=e;return(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:r}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t}),s&&(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium ".concat({positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-500"}[o]),children:["positive"===o&&"+",s]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"vs last month"})]})]}),(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat({blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",orange:"bg-orange-50 text-orange-600",purple:"bg-purple-50 text-purple-600",gray:"bg-gray-50 text-gray-600"}[i]),children:n})]})})}},2722:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var a=t(5893),n=t(7294),s=t(1639),o=t(4178),i=t(7190);function l(){let[e,r]=(0,n.useState)([]),[t,l]=(0,n.useState)(!0);(0,n.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/admin/hubspot-deals");if(e.ok){let t=(await e.json()).filter(e=>["decisionmakerboughtin","contractsent","closedwon"].includes(e.stage)&&e.amount>0);r(t)}}catch(e){console.error("Error fetching deals:",e)}finally{l(!1)}},c=async e=>{try{let r=await fetch("/api/invoices/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dealId:e.id,amount:e.amount,description:"Website development services - ".concat(e.name),customerEmail:"customer@example.com",customerName:e.name,dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0]})});if(r.ok){let e=await r.json();alert("Invoice created successfully! Invoice ID: ".concat(e.invoiceId))}else alert("Failed to create invoice")}catch(e){console.error("Error creating invoice:",e),alert("Error creating invoice")}},g=e=>({decisionmakerboughtin:"bg-green-100 text-green-800",contractsent:"bg-orange-100 text-orange-800",closedwon:"bg-green-200 text-green-900"})[e]||"bg-gray-100 text-gray-800",x=e=>({decisionmakerboughtin:"Decision Maker Bought In",contractsent:"Contract Sent",closedwon:"Closed Won"})[e]||e,h=[{key:"name",label:"Deal Name",sortable:!0,render:(e,r)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:r.source||"Website"})]})},{key:"amount",label:"Invoice Amount",sortable:!0,render:e=>(0,a.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["$",(null==e?void 0:e.toLocaleString())||"0"]})},{key:"stage",label:"Stage",render:e=>(0,a.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat(g(e)),children:x(e)})},{key:"createdAt",label:"Deal Created",render:e=>(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e?new Date(e).toLocaleDateString():"-"})},{key:"actions",label:"Actions",render:(e,r)=>(0,a.jsx)("button",{onClick:()=>c(r),className:"px-4 py-2 text-sm font-medium text-white bg-gray-900 dark:bg-gray-700 rounded-lg hover:bg-gray-800 dark:hover:bg-gray-600 transition-colors",children:"Create Invoice"})}],m=e.reduce((e,r)=>e+(r.amount||0),0),u=e.length>0?m/e.length:0;return t?(0,a.jsx)(s.Z,{title:"Invoicing",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}):(0,a.jsx)(s.Z,{title:"Invoicing",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(o.Z,{title:"Ready to Invoice",value:"$".concat(m.toLocaleString()),color:"green",icon:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,a.jsx)(o.Z,{title:"Invoice Count",value:e.length,color:"blue",icon:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)(o.Z,{title:"Average Deal",value:"$".concat(Math.round(u).toLocaleString()),color:"purple",icon:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),(0,a.jsx)(i.Z,{title:"Ready to Invoice",data:e,columns:h,actions:[(0,a.jsx)("button",{onClick:d,className:"px-3 py-1.5 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700",children:"Refresh"},"refresh")],emptyState:{title:"No deals ready for invoicing",description:"Move deals to qualified stages in your CRM first, then return here to create invoices."}}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)("button",{onClick:()=>window.location.href="/admin/crm",className:"p-4 text-left border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg mr-3",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"View CRM Pipeline"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage deal stages"})]})]})}),(0,a.jsx)("button",{onClick:()=>window.open("https://app.hubspot.com/","_blank"),className:"p-4 text-left border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/20 rounded-lg mr-3",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Open HubSpot"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage contacts & deals"})]})]})}),(0,a.jsx)("div",{className:"p-4 text-left border border-gray-200 dark:border-gray-600 rounded-lg opacity-50",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg mr-3",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Stripe Integration"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Coming soon"})]})]})})]})]})]})})}}},function(e){e.O(0,[664,689,888,774,179],function(){return e(e.s=8570)}),_N_E=e.O()}]);