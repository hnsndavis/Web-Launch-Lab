(()=>{var e={};e.id=888,e.ids=[888],e.modules={3345:(e,r,s)=>{"use strict";s.d(r,{H:()=>d,a:()=>l});var t=s(997),i=s(6689),u=s(1163),a=s(2885);let c=process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtjcmR3aHl0amNscXhseXZtb3dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1MDkzNTYsImV4cCI6MjA3MDA4NTM1Nn0.SXgOgImK9bt4goKllLFP5kIlzRnb-aHsLvpcDggEIW0",n=(0,a.createClient)("https://kcrdwhytjclqxlyvmowd.supabase.co",c),o=(0,i.createContext)();function l(){return(0,i.useContext)(o)}function d({children:e}){let[r,s]=(0,i.useState)(null),[a,c]=(0,i.useState)(!0),l=(0,u.useRouter)(),d=async(e,r)=>{try{let{data:t,error:i}=await n.auth.signInWithPassword({email:e,password:r});if(i)return{success:!1,error:i.message};let{data:u}=await n.from("users").select("role").eq("email",e).single(),a={...t.user,role:u?.role||"client"};return s(a),"admin"===a.role?l.push("/admin/dashboard"):l.push("/dashboard"),{success:!0}}catch(e){return{success:!1,error:"Login failed"}}},p=async()=>{await n.auth.signOut(),s(null),l.push("/")};return t.jsx(o.Provider,{value:{user:r,login:d,logout:p,loading:a},children:e})}},3414:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u});var t=s(997);s(6764);var i=s(3345);function u({Component:e,pageProps:r}){return t.jsx(i.H,{children:t.jsx(e,{...r})})}},6764:()=>{},2885:e=>{"use strict";e.exports=require("@supabase/supabase-js")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")}};var r=require("../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[567,163],()=>s(3414));module.exports=t})();